<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .link-btn {
            display: inline-block;
            padding: 6px 12px;
            background: #2c2c2c; /* Carbon Grey */
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 12px;
            margin-top: 5px;
        }
        .link-btn:hover { background: #000; }
    </style>
</head>
<body>
    <div style="padding: 20px;">
        <h1 style="color: var(--bambu-green);">Order Management</h1>

        <div class="box">
            <h3>Update Available Colors</h3>
            <form action="/update_colors" method="POST" style="display:flex; gap:10px;">
                <input type="text" name="colors_list" value="{{ current_colors }}" style="flex:1;">
                <button type="submit" style="width: auto; padding: 0 20px;">Update</button>
            </form>
        </div>

        <table class="admin-table">
            <thead>
                <tr>
                    <th>Order Info</th>
                    <th>Color</th>
                    <th>Link</th> <th>Details & Delivery</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td>
                        <strong>{{ order.get('name', 'No Name') }}</strong><br>
                        <small style="color:#888;">ID: {{ order.id }}</small>
                    </td>
                    <td><span class="badge">{{ order.color }}</span></td>
                    <td>
                        <a href="{{ order.link }}" target="_blank" class="link-btn">ðŸ”— Open MakerWorld</a>
                    </td>
                    <td>
                        <form action="/update_order/{{ order.id }}" method="POST">
                            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
                                <input type="text" name="print_price" value="{{ order.print_price }}" placeholder="Price">
                                <input type="text" name="material_fee" value="{{ order.material_fee }}" placeholder="Fee">
                            </div>
                            <input type="datetime-local" name="delivery_time" value="{{ order.delivery_time }}">
                            
                            <select name="status">
                                <option value="{{ order.status }}">{{ order.status }}</option>
                                <option value="Quote Sent">Quote Sent</option>
                                <option value="Printing">Printing</option>
                                <option value="Done">Done</option>
                                <option value="Delivered">Delivered (Archive)</option>
                            </select>
                    </td>
                    <td>
                        <button type="submit">Update</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>